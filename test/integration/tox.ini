[tox]
envlist = ui-tests, flake8
skipsdist = True

[testenv]
skip_install = True
passenv = DISPLAY MOZ_HEADLESS
deps = -rpipenv.txt
commands =
    pipenv install --skip-lock
    pipenv run pytest -v --verify-base-url --driver Remote --host selenium --port 4444 --capability browserName firefox --html=send-test.html --self-contained-html {posargs}

[testenv:flake8]
commands =
    pipenv install --skip-lock
    pipenv run flake8 {posargs:.}

[flake8]
exclude = .eggs,.tox,docs,node_modules

[pytest]
base_url = https://send.dev.mozaws.net
sensitive_url = mozilla\.(com|org)
testpaths = ./
